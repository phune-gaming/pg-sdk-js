!function(a){"use strict";var b=function(){var b,c,d,e="*",f={WON:"won",LOST:"lost",DRAW:"draw"},g=null,h=function(a){return"undefined"!=typeof a?a===c.id?f.WON:a===d.id?f.LOST:f.DRAW:void 0},i=function(){throw new Error("onMatchPrepare is not implemented.")},j=function(){throw new Error("onGameLobby is not implemented.")},k=function(){throw new Error("onMatchStart is not implemented.")},l=function(){throw new Error("onMoveValid is not implemented.")},m=function(){throw new Error("onMoveInvalid is not implemented.")},n=function(){throw new Error("onServerMessage is not implemented.")},o=function(){throw new Error("onPlayerMessage is not implemented.")},p=function(){throw new Error("onMatchEnd is not implemented.")},q=function(){throw new Error("onKeyPress is not implemented.")};return{init:function(b){i=b.onMatchPrepare||i,j=b.onGameLobby||j,k=b.onMatchStart||k,l=b.onMoveValid||l,m=b.onMoveInvalid||m,p=b.onMatchEnd||p,n=b.onServerMessage||n,o=b.onPlayerMessage||o,q=b.onKeyPress||q,a.addEventListener("message",function(a){switch(a.data.type){case"matchPrepare":c=a.data.player,d=a.data.opponent,i(c,d,a.data.deviceType);break;case"enterGameLobby":j(a.data.timeout);break;case"matchStart":k(a.data.nextPlayerId,a.data.timeout);break;case"matchMoveValid":l(a.data.playerId,a.data.nextPlayerId,a.data.content,a.data.evaluationContent,h(a.data.winnerPlayerId));break;case"matchMoveInvalid":m(a.data.nextPlayerId,a.data.evaluationContent);break;case"matchEnd":p(h(a.data.winnerPlayerId));break;case"serverMessage":n(a.data.playerId,a.data.content,a.data.result);break;case"playerMessage":o(a.data.content);break;case"keyPress":q(a.data.value)}}),a.parent.postMessage({type:"loaded"},e)},ready:function(){a.parent.postMessage({type:"ready"},e)},exitGameLobby:function(){a.parent.postMessage({type:"exitGameLobby"},e)},move:function(b,c){return c&&!c(b)?!1:(a.parent.postMessage({type:"move",content:b},e),!0)},showMenu:function(){a.parent.postMessage({type:"showMenu"},e)},serverMessage:function(b,c,d){a.parent.postMessage({type:"serverMessage",publicAnswer:c,requiresConcurrencyControl:d?d:!0,content:b},e)},playerMessage:function(c,d){d&&null!==g||(b={type:"playerMessage",content:c},a.parent.postMessage(b,e),d&&setTimeout(function(){g!==b?(b=g,g=null,a.parent.postMessage(b,e)):g=null},d)),d&&(g=b)}}};a.PG=new b}(window,document);